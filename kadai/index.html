<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>myMemoPad</title>
    <script src="js/jquery-2.1.3.min.js"></script>
    <link rel="stylesheet" href="css/sample.css">
    <link href="https://fonts.googleapis.com/css2?family=Overlock:wght@900&family=Roboto:wght@500&family=Zen+Kaku+Gothic+New&family=Zen+Maru+Gothic:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Gamja+Flower&family=Overlock:wght@900&family=Roboto:wght@500&family=Zen+Kaku+Gothic+New&family=Zen+Maru+Gothic:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.2.0/css/font-awesome.min.css">

</head>

<style>
.fa {
    font-size: 30px;
    cursor: pointer;
}

#rating {
    font-size: 0;
    width: 140px;
}


.fa-star {
    color: gold;
}

.fa-star-o {
    color: grey;
}
</style>

<body>


    <div class="sidebar">
        <div class="sidebar-header">
            <h1>ãƒ¬ã‚·ãƒ”æ—¥è¨˜</h1>
        </div>
        <div class="search-container">
            <input type="text" placeholder="æ¤œç´¢...">
        </div>
        <button class="create-button">æ–°è¦ä½œæˆ</button>
        <nav class="menu">
            <ul>
                <li class="static-link"><a href="#recipes">ãƒ¬ã‚·ãƒ”ä¸€è¦§</a></li>
                <li class="static-link"><a href="#settings">è¨­å®š</a></li>
            </ul>
        </nav>
    </div>

    <main>
        <header>
            <h2>ãƒ¬ã‚·ãƒ”æ—¥è¨˜ç™»éŒ²</h2>
        </header>

        <div class="form-section">
            <div class="button-group">
                <button type="button" class="save-button" onclick="saveRecipe()">Save</button>
                <button type="button" class="draft-button" onclick="clearForm()">ä¸‹æ›¸ã</button>
                <button type="button" class="delete-button" onclick="deleteRecipe()">å‰Šé™¤</button>
            </div>
        </div>
    
<!-- é£Ÿäº‹ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
<div id="app">
    <form id="recipeForm" class="form-layout">
        <div class="left-column">

            <div class="form-section">
                <label class="label-title" for="recipeTitle">ã‚¿ã‚¤ãƒˆãƒ«:</label>
                <div class="form-group">
                    <input type="text" id="recipeTitle" placeholder="ãƒ¬ã‚·ãƒ”ã®ã‚¿ã‚¤ãƒˆãƒ«ã‚’å…¥åŠ›">
                </div>
            </div>

        <div class="form-section">
            <label class="label-title" for="mealTime">é£Ÿäº‹ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°:</label>
            <div class="form-group">
                <select id="mealTime">
                    <option value="breakfast">æœã”é£¯</option>
                    <option value="lunch">æ˜¼ã”ã¯ã‚“</option>
                    <option value="snack">ãŠã‚„ã¤</option>
                    <option value="dinner">å¤œã”é£¯</option>
                    <option value="lateNight">å¤œé£Ÿ</option>
                </select>
            </div>
        </div>
    
        <div class="form-section">
            <label class="label-title" for="ingredients">å¿…è¦ãªã‚‚ã®ãƒªã‚¹ãƒˆ:</label>
            <div id="ingredients" class="form-group">
                <!-- JavaScriptã§å‹•çš„ã«è¡Œã‚’è¿½åŠ ã™ã‚‹ãŸã‚ã®ã‚³ãƒ³ãƒ†ãƒŠ -->
                <div id="ingredientsList">
                    <!-- JavaScriptã§ã“ã“ã«å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒè¿½åŠ ã•ã‚Œã‚‹ -->
                </div>
                <button type="button" onclick="addIngredient()">è¿½åŠ </button>
            </div>
        </div>

        <div class="form-section">
            <label class="label-title" for="audienceType">äººæ•°:</label>
            <div class="form-group">
                <select id="audienceType">
                        <option value="adult">å¤§äºº</option>
                        <option value="child">å­ä¾›</option>
                    </select>
                    <input type="number" id="audienceCount" min="1">
                </div>
            </div>
    
            <div class="form-section">
                <label class="label-title" for="cookTime">æ–™ç†æ™‚é–“:</label>
                <div class="form-group">
                    <select id="cookDays"></select>
                    <label for="cookDays">æ—¥</label>
                    
                    <select id="cookHours"></select>
                    <label for="cookHours">æ™‚é–“</label>
                
                    <select id="cookMins"></select>
                    <label for="cookMins">åˆ†</label>
                </div>
            </div>
    
            <div class="form-section">
                <label class="label-title" for="cuisine">æ–™ç†ã®ç¨®é¡:</label>
                <div class="form-group">
                    <select id="cuisine">
                        <!-- ã‚ªãƒ—ã‚·ãƒ§ãƒ³ -->
                    </select>
                </div>
            </div>

            <div class="form-section"></div>
                    <label class="label-title" for="keywords">Enter tags:</label>
                  
                    <div id="keywords" class="tag-input-container">
                    <div id="keywordTags" class="tags"></div>
                     <input type="text" id="keywordInput" class="tag-input" placeholder="Enter tags">
                    </div>
    
    
                <div class="form-section">
                    <label class="label-title" for="makeAgain">ã¾ãŸä½œã‚ŠãŸã„:</label>
                    <div class="form-group">
                        <input type="checkbox" id="makeAgain">
                        <label for="makeAgain"></label>
                    </div>
                </div>


     </div>
           
     <div class="right-column">
        <div class="form-section">
                <label class="label-title" for="recipe">ä½œã‚Šæ–¹:</label>
                <div class="form-group">
                    <textarea id="recipe"></textarea>
                </div>
            </div>
    
            <div class="form-section">
                <label class="label-title" for="rating">è©•ä¾¡:</label>
                <div id="rating" class="form-group">
                    <i class="fa fa-star active"></i>
                    <i class="fa fa-star-o"></i>
                    <i class="fa fa-star-o"></i>
                    <i class="fa fa-star-o"></i>
                    <i class="fa fa-star-o"></i>
                </div>
            </div>

            <div class="form-section">
            <textarea id="ratingComment" placeholder="ã‚³ãƒ¡ãƒ³ãƒˆ"></textarea>
    </div>
    

        </div>

        </form>
     </div>


    </main>

    <footer></footer>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script>
window.onload = function() {
    initDaysDropdown();
    initHoursDropdown();
    initMinsDropdown();
    addIngredient();
    initCuisineDropdown(); // æ–™ç†ã®ç¨®é¡ã®ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‚’åˆæœŸåŒ–
};

function addIngredient() {
    const ingredientsList = document.getElementById('ingredientsList');

    const ingredientDiv = document.createElement('div');
    ingredientDiv.classList.add('ingredient-item');

    const itemInput = document.createElement('input');
    itemInput.type = 'text';
    itemInput.placeholder = 'é …ç›®å';
    itemInput.classList.add('ingredient-input');

    const quantityInput = document.createElement('input');
    quantityInput.type = 'text';
    quantityInput.placeholder = 'é‡';
    quantityInput.classList.add('ingredient-input');

    const deleteButton = document.createElement('button');
    deleteButton.textContent = 'ğŸ—‘ï¸';
    deleteButton.classList.add('delete-ingredient');
    deleteButton.onclick = function() {
        ingredientsList.removeChild(ingredientDiv);
    };

    ingredientDiv.appendChild(itemInput);
    ingredientDiv.appendChild(quantityInput);
    ingredientDiv.appendChild(deleteButton);

    ingredientsList.appendChild(ingredientDiv);
}


function saveRecipe() {
    // ãƒ•ã‚©ãƒ¼ãƒ ã®å†…å®¹ã‚’Local Storageã«ä¿å­˜
}

function clearForm() {
    // ãƒ•ã‚©ãƒ¼ãƒ ã®å†…å®¹ã‚’ã‚¯ãƒªã‚¢
}

function deleteRecipe() {
    // Local Storageã‹ã‚‰ãƒ¬ã‚·ãƒ”ã‚’å‰Šé™¤
}


function initDaysDropdown() {
    const daysSelect = document.getElementById('cookDays');
    for (let i = 0; i <= 5; i++) {
        const option = document.createElement('option');
        option.value = i;
        option.textContent = `${i}`;
        daysSelect.appendChild(option);
    }
}

function initHoursDropdown() {
    const hoursSelect = document.getElementById('cookHours');
    for (let i = 0; i <= 23; i++) {
        const option = document.createElement('option');
        option.value = i;
        option.textContent = `${i}`;
        hoursSelect.appendChild(option);
    }
}

function initMinsDropdown() {
    const minsSelect = document.getElementById('cookMins');
    // 0åˆ†ã‹ã‚‰5åˆ†ã¾ã§1åˆ†åˆ»ã¿ã§è¿½åŠ 
    for (let i = 0; i <= 5; i++) {
        const option = document.createElement('option');
        option.value = i;
        option.textContent = `${i}`;
        minsSelect.appendChild(option);
    }
    // 10åˆ†ã‹ã‚‰55åˆ†ã¾ã§5åˆ†åˆ»ã¿ã§è¿½åŠ 
    for (let i = 10; i <= 55; i += 5) {
        const option = document.createElement('option');
        option.value = i;
        option.textContent = `${i}`;
        minsSelect.appendChild(option);
    }
}


function initCuisineDropdown() {
    const cuisineSelect = document.getElementById('cuisine');
    const cuisines = [
        "ã‚¤ã‚¿ãƒªã‚¢ãƒ³", "ãƒ•ãƒ©ãƒ³ã‚¹", "ä¸­å›½", "æ—¥æœ¬", "ã‚¤ãƒ³ãƒ‰", "ãƒ¡ã‚­ã‚·ã‚³", "ã‚¿ã‚¤", "ã‚¹ãƒšã‚¤ãƒ³", "ä¸­æ±", 
        "ã‚®ãƒªã‚·ãƒ£", "éŸ“å›½", "ãƒ™ãƒˆãƒŠãƒ ", "ãƒ¢ãƒ­ãƒƒã‚³", "ã‚¨ãƒã‚ªãƒ”ã‚¢", "ã‚«ãƒªãƒ–", "ãƒ–ãƒ©ã‚¸ãƒ«", "ãƒˆãƒ«ã‚³", 
        "ãƒ‰ã‚¤ãƒ„", "ãƒ­ã‚·ã‚¢", "ãƒãƒ«ãƒˆã‚¬ãƒ«", "ãƒãƒ¬ãƒ¼ã‚·ã‚¢", "ã‚¤ãƒ³ãƒ‰ãƒã‚·ã‚¢", "ãƒšãƒ«ãƒ¼", "ã‚¢ãƒ«ã‚¼ãƒ³ãƒãƒ³", 
        "ã‚­ãƒ¥ãƒ¼ãƒ", "ãƒ•ã‚£ãƒªãƒ”ãƒ³", "ãƒ¬ãƒãƒãƒ³", "ã‚¨ã‚¸ãƒ—ãƒˆ", "å—ã‚¢ãƒ•ãƒªã‚«", "ã‚ªãƒ¼ã‚¹ãƒˆãƒ©ãƒªã‚¢", "ã‚¤ã‚®ãƒªã‚¹", 
        "ã‚¢ãƒ¡ãƒªã‚«", "ãƒ™ãƒ«ã‚®ãƒ¼", "ã‚¹ã‚¦ã‚§ãƒ¼ãƒ‡ãƒ³", "ãƒ‡ãƒ³ãƒãƒ¼ã‚¯", "ãƒãƒ¼ãƒ©ãƒ³ãƒ‰", "ãƒãƒ³ã‚¬ãƒªãƒ¼", "ãƒã‚§ã‚³", 
        "ãƒ«ãƒ¼ãƒãƒ‹ã‚¢", "ãƒ–ãƒ«ã‚¬ãƒªã‚¢", "ã‚ªãƒ©ãƒ³ãƒ€", "ã‚¹ã‚¤ã‚¹", "ã‚ªãƒ¼ã‚¹ãƒˆãƒªã‚¢", "ã‚¢ã‚¤ãƒ«ãƒ©ãƒ³ãƒ‰", "ã‚¹ã‚³ãƒƒãƒˆãƒ©ãƒ³ãƒ‰", 
        "ã‚¸ãƒ§ãƒ¼ã‚¸ã‚¢", "ã‚¢ãƒ«ãƒ¡ãƒ‹ã‚¢", "ã‚¤ãƒ©ãƒ³", "ã‚¤ãƒ©ã‚¯", "ãƒ‘ã‚­ã‚¹ã‚¿ãƒ³"
    ];

    cuisines.forEach(function(cuisine) {
        const option = document.createElement('option');
        option.value = cuisine;
        option.textContent = cuisine;
        cuisineSelect.appendChild(option);
    });
}

document.addEventListener('DOMContentLoaded', function() {
    const keywordInput = document.getElementById('keywordInput');
    const keywordTags = document.getElementById('keywordTags');

    keywordInput.addEventListener('keydown', function(event) {
        // Enterã‚­ãƒ¼ãŒæŠ¼ã•ã‚ŒãŸã¨ãã«ã‚¿ã‚°ã‚’è¿½åŠ 
        if (event.key === 'Enter') {
            event.preventDefault(); // ãƒ•ã‚©ãƒ¼ãƒ ã®é€ä¿¡ã‚’é˜²ã
            addKeywordTag(keywordInput.value, keywordTags);
            keywordInput.value = ''; // å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’ã‚¯ãƒªã‚¢
        }
    });
});

function addKeywordTag(text, container) {
    text = text.trim();
    if (text) {
        const tag = document.createElement('div');
        tag.className = 'tag';
        tag.textContent = text;

        const removeBtn = document.createElement('span');
        removeBtn.className = 'remove-tag';
        removeBtn.textContent = 'Ã—';
        removeBtn.onclick = function() { container.removeChild(tag); };

        tag.appendChild(removeBtn);
        container.appendChild(tag);
    }
}

$(document).ready(function() {
    // æ˜Ÿã®ãƒã‚¦ã‚¹ã‚ªãƒ¼ãƒãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆ
    $('#rating .fa').on('mouseover', function(){
        $(this).addClass('fa-star').removeClass('fa-star-o');
        $(this).prevAll().addClass('fa-star').removeClass('fa-star-o');
        $(this).nextAll().addClass('fa-star-o').removeClass('fa-star');
    });

    // æ˜Ÿã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
    $('#rating .fa').on('click', function(){
        $(this).addClass('active fa-star').removeClass('fa-star-o');
        $(this).prevAll().addClass('fa-star').removeClass('fa-star-o');
        $(this).nextAll().removeClass('fa-star active').addClass('fa-star-o');
    });

    // æ˜Ÿã®ãƒã‚¦ã‚¹ãƒªãƒ¼ãƒ–ã‚¤ãƒ™ãƒ³ãƒˆ
    $('#rating').on('mouseleave', function(){
        $('#rating .fa').removeClass('fa-star').addClass('fa-star-o');
        var active = $('#rating .fa.active');
        if(active.length) {
            active.addClass('fa-star').removeClass('fa-star-o');
            active.prevAll().addClass('fa-star').removeClass('fa-star-o');
        }
    });
});



function saveRecipe() {
    const recipe = {
        title: document.getElementById('recipeTitle').value,
        mealTime: document.getElementById('mealTime').value,
        ingredients: document.getElementById('ingredients').innerHTML,
        audienceType: document.getElementById('audienceType').value,
        audienceCount: document.getElementById('audienceCount').value,
        cookDays: document.getElementById('cookDays').value,
        cookHours: document.getElementById('cookHours').value,
        cookMins: document.getElementById('cookMins').value,
        cuisine: document.getElementById('cuisine').value,
        recipe: document.getElementById('recipe').value,
        rating: document.getElementById('rating').getElementsByClassName('active').length,
        tags: [...document.getElementById('keywordTags').children].map(tag => tag.textContent),
        makeAgain: document.getElementById('makeAgain').checked
    };
    // æ–°ã—ã„ãƒ¬ã‚·ãƒ”ã‚’é…åˆ—ã®å…ˆé ­ã«è¿½åŠ 
    let recipes = JSON.parse(localStorage.getItem('recipes')) || [];
    recipes.unshift(recipe); // unshiftãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¦é…åˆ—ã®å…ˆé ­ã«è¿½åŠ 
    localStorage.setItem('recipes', JSON.stringify(recipes));
    displayRecipes(); // ãƒ¬ã‚·ãƒ”ä¸€è¦§ã‚’æ›´æ–°
}

function displayRecipes() {
    let recipes = JSON.parse(localStorage.getItem('recipes')) || [];
    let list = document.querySelector('.menu ul');
    
    // "ãƒ¬ã‚·ãƒ”ä¸€è¦§"ã¨"è¨­å®š"ã‚’é™¤ããƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã‚’ã‚¯ãƒªã‚¢
    list.querySelectorAll('li:not(.static-link)').forEach(li => li.remove());

    // é…åˆ—ã‚’é€†é †ã«ã—ã¦ã‹ã‚‰ãƒ«ãƒ¼ãƒ—ã‚’å®Ÿè¡Œ
    recipes.slice().reverse().forEach(recipe => {
        let listItem = document.createElement('li');
        listItem.textContent = recipe.title || `ãƒ¬ã‚·ãƒ” ${recipes.indexOf(recipe) + 1}`;
        // "ãƒ¬ã‚·ãƒ”ä¸€è¦§"ã®ãƒªãƒ³ã‚¯ã®å¾Œã‚ã«æŒ¿å…¥ã™ã‚‹
        const firstDynamicListItem = list.querySelector('.dynamic') || list.querySelector('.static-link').nextSibling;
        list.insertBefore(listItem, firstDynamicListItem);
        listItem.classList.add('dynamic'); // è¿½åŠ ã•ã‚ŒãŸãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã«ã‚¯ãƒ©ã‚¹ã‚’ä»˜ã‘ã‚‹
    });
}



function deleteRecipe() {
    // This function should be modified to identify which recipe to delete
    localStorage.removeItem('recipes');
    displayRecipes(); // Update the recipe list
}

// ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã¨ãƒ¬ã‚·ãƒ”ä¿å­˜æ™‚ã«ãƒªã‚¹ãƒˆè¡¨ç¤ºã‚’æ›´æ–°
document.addEventListener('DOMContentLoaded', displayRecipes);


</script>
</body>

</html>